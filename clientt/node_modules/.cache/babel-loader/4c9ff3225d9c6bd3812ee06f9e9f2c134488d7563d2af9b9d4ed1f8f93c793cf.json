{"ast":null,"code":"import _regeneratorRuntime from\"/home/enes/Desktop/16ocak lamadev bllog/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/enes/Desktop/16ocak lamadev bllog/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/enes/Desktop/16ocak lamadev bllog/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./settings.css\";import Sidebar from'../../components/sidebar/Sidebar';import{useContext,useState}from'react';import{Context}from'../../context/Context';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Settings=function Settings(){var _useContext=useContext(Context),user=_useContext.user,dispatch=_useContext.dispatch;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),file=_useState8[0],setFile=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),success=_useState10[0],setSuccess=_useState10[1];var PF=\"http://localhost:5000/images/\";var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var updatedUser,data,filename,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"UPDATE_START\"});updatedUser={userId:user._id,username:username,email:email,password:password};if(!file){_context.next=16;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);updatedUser.profilePic=filename;_context.prev=9;_context.next=12;return axios.post(\"/upload\",data);case 12:_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);case 16:_context.prev=16;_context.next=19;return axios.put(\"/users/\"+user._id,updatedUser);case 19:res=_context.sent;setSuccess(true);dispatch({type:\"UPDATE_SUCCESS\",payload:res.data});_context.next=27;break;case 24:_context.prev=24;_context.t1=_context[\"catch\"](16);dispatch({type:\"UPDATE_FAILURE\"});case 27:case\"end\":return _context.stop();}},_callee,null,[[9,14],[16,24]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsTitle\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"settingsUpdateTitle\",children:\"Update Your Account\"}),/*#__PURE__*/_jsx(\"span\",{className:\"settingsDeleteTitle\",children:\"Delete Account\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"settingsForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"settingsPP\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"settingsImg\",alt:\"\",src:file?URL.createObjectURL(file):PF+user.profilePic}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"settingsPPIcon fa-regular fa-user\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:user.username,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:user.email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"settingsSubmit\",type:\"submit\",children:\"Update\"}),success&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"green\",textAlign:\"center\",marginTop:\"20px\"},children:\"Profile has been updated\"})]})]}),/*#__PURE__*/_jsx(Sidebar,{})]});};export default Settings;","map":{"version":3,"names":["Sidebar","useContext","useState","Context","axios","Settings","user","dispatch","username","setUsername","email","setEmail","password","setPassword","file","setFile","success","setSuccess","PF","handleSubmit","e","preventDefault","type","updatedUser","userId","_id","data","FormData","filename","Date","now","name","append","profilePic","post","put","res","payload","URL","createObjectURL","display","target","files","value","color","textAlign","marginTop"],"sources":["/home/enes/Desktop/16ocak lamadev bllog/client/src/pages/settings/Settings.jsx"],"sourcesContent":["import \"./settings.css\";\nimport Sidebar from '../../components/sidebar/Sidebar';\nimport {useContext, useState} from 'react';\nimport {Context} from '../../context/Context';\nimport axios from 'axios';\n\nconst Settings = () => {\n    const {user, dispatch} = useContext(Context);\n    const [username, setUsername] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [file, setFile] = useState(null)\n    const [success, setSuccess] = useState(false);\n    const PF = \"http://localhost:5000/images/\"\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        dispatch({type : \"UPDATE_START\"})\n        const updatedUser = {\n            userId : user._id,\n            username,email,password\n        };\n        if (file){\n            const data = new FormData();\n            const filename = Date.now() + file.name;\n            data.append(\"name\", filename);\n            data.append(\"file\", file);\n            updatedUser.profilePic = filename;\n            try {\n                await axios.post(\"/upload\", data);\n            }catch (err) {}\n        }\n        try {\n            const res= await axios.put(\"/users/\"+ user._id, updatedUser);\n            setSuccess(true)\n            dispatch({type : \"UPDATE_SUCCESS\", payload : res.data})\n        }catch (err){\n            dispatch({type : \"UPDATE_FAILURE\"})\n        }\n    };\n    return (\n        <div className=\"settings\">\n            <div className=\"settingsWrapper\">\n                <div className=\"settingsTitle\">\n                    <span className=\"settingsUpdateTitle\">Update Your Account</span>\n                    <span className=\"settingsDeleteTitle\">Delete Account</span>\n                </div>\n                <form className=\"settingsForm\" onSubmit={handleSubmit}>\n                    <label>Profile Picture</label>\n                    <div className=\"settingsPP\">\n                        <img\n                            className=\"settingsImg\"\n                        alt=\"\"\n                        src={file ? URL.createObjectURL(file) : PF + user.profilePic}/>\n                        <label htmlFor=\"fileInput\">\n                            <i className=\"settingsPPIcon fa-regular fa-user\"></i>\n                        </label>\n                        <input type=\"file\" id=\"fileInput\" style={{display: \"none\"}}\n                        onChange={(e) => setFile(e.target.files[0])}/>\n                    </div>\n                    <label>Username</label>\n                    <input type=\"text\" placeholder={user.username} onChange={e => setUsername(e.target.value)}/>\n                    <label>Email</label>\n                    <input type=\"text\" placeholder={user.email} onChange={e => setEmail(e.target.value)}/>\n                    <label>Password</label>\n                    <input type=\"text\" onChange={e => setPassword(e.target.value)}/>\n                    <button className=\"settingsSubmit\" type=\"submit\">Update</button>\n                    {success && <span style={{color : \"green\", textAlign: \"center\", marginTop: \"20px\"}}>Profile has been updated</span>}\n                </form>\n            </div>\n            <Sidebar/>\n        </div>\n    )\n}\n\nexport default Settings"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}